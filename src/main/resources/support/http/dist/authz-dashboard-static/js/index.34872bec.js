(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["index"],{"28c1":function(t,e,s){"use strict";s("e620")},"2e59":function(t,e,s){},3006:function(t,e,s){"use strict";s("3ce0")},3333:function(t,e,s){},"33ae":function(t,e,s){"use strict";s("689c")},"3ce0":function(t,e,s){},4366:function(t,e,s){},"4e59":function(t,e,s){},5443:function(t,e,s){"use strict";s("3333")},6751:function(t,e,s){},"689c":function(t,e,s){},"869a":function(t,e,s){},"9b09":function(t,e,s){},a13a:function(t,e,s){"use strict";s("6751")},a27f:function(t,e,s){},a55b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("div",{staticClass:"container",attrs:{id:"container"}},[e("div",{staticClass:"form-container sign-in-container"},[e("div",{staticClass:"form"},[e("h1"),e("span",[t._v(" "+t._s(t.trans("使用你的账户"))+" ")]),e("input",{directives:[{name:"model",rawName:"v-model:value",value:t.username,expression:"username",arg:"value"}],attrs:{type:"text",placeholder:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model:value",value:t.password,expression:"password",arg:"value"}],attrs:{type:"password",placeholder:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),e("button",{attrs:{disabled:t.waitLogin},on:{click:t.doLogin}},[t._v(t._s(t.waitLogin?t.trans("等待中..."):t.trans("登录")))])])])])])},i=[],r=s("731e"),n=s("cc33"),o={name:"Login",data(){return{username:"",password:"",waitLogin:!1,ok:!1}},computed:{},methods:{trans:r["a"],doLogin(){if(this.waitLogin)return void this.$message.warning(Object(r["a"])("等待中..."));if(this.ok)return;this.waitLogin=!0;let t=this.username,e=this.password,s={username:t,password:e};this.$http.post("/user/login",s).then(e=>{100===e.code?(this.$notification.success({message:`${Object(r["a"])("登录成功")}:  ${t}`,duration:3}),Object(n["e"])(e.data.uuid),this.$router.push("/").catch(t=>{}),this.ok=!0):(this.password="",this.$message.error(Object(r["a"])("密码错误"))),this.waitLogin=!1})}},created(){}},c=o,l=(s("dd9f"),s("0b56")),h=Object(l["a"])(c,a,i,!1,null,"3f344a36",null);e["default"]=h.exports},ae74:function(t,e,s){"use strict";s("9b09")},bdd4:function(t,e,s){"use strict";s("4e59")},ce7e:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"outline-content"},[e("h1",[t._v("由于您长时间未操作，请重新登录！")]),e("p",{staticStyle:{"text-align":"center"}},[e("span",{staticStyle:{color:"red","font-size":"20px"},attrs:{id:"second"}},[t._v(t._s(t.count))]),t._v("s后，您将返回 "),e("router-link",{attrs:{to:"/login"}},[t._v("登录")]),t._v(" 页面。 ")],1)])},i=[],r={name:"Outline",data(){return{count:10}},methods:{},mounted(){let t=setInterval(()=>{this.count--,0===this.count&&(clearInterval(t),this.$router.push("/login"))},1e3)}},n=r,o=(s("33ae"),s("0b56")),c=Object(o["a"])(n,a,i,!1,null,"367796c4",null);e["default"]=c.exports},d504:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[t.load?t._e():e("div",{attrs:{id:"index"}},[e("div",{staticClass:"info-header"},[t._v("Authz "+t._s(t.docs.authz?"-"+t.docs.authz:""))]),e("div",{staticClass:"info-content"},[e("h5",[t._v(t._s(t.docs.info.title)+" "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.info.version))])]),e("div",{staticStyle:{"margin-left":"10px"}},[e("h6",[t._v("api description: "),e("a",{attrs:{target:"_blank",href:`${t.getUrl(t.docs.appVersionInfo.dashboardApiHelper)}${t.token?"?uuid="+t.token:""}`}},[t._v(" "+t._s(t.getUrl(t.docs.appVersionInfo.dashboardApiHelper))+" ")])]),e("h6",[t._v("api docs: "),e("a",{attrs:{target:"_blank",href:`${t.getUrl(t.docs.appVersionInfo.dashboardDocs)}${t.token?"?uuid="+t.token:""}`}},[t._v(" "+t._s(t.getUrl(t.docs.appVersionInfo.dashboardDocs))+" ")])])]),e("h5",[t._v("license:")]),e("div",{staticStyle:{"margin-left":"10px"}},[e("h6",[t._v(t._s(t.docs.license.name)+" : "),e("a",{staticClass:"license-url",attrs:{target:"_blank",href:t.docs.license.url}},[t._v(" "+t._s(t.docs.license.url)+" ")])])]),e("h5",[t._v("description:")]),e("div",{staticStyle:{"margin-left":"10px"}},[e("div",[t._v(t._s(t.docs.info.description))])])]),e("div",{staticClass:"info-header"},[t._v(" Server ")]),e("div",{staticClass:"info-content"},[e("h5",[t._v("Application : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.appVersionInfo.application))])]),e("h5",[t._v("App Name : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.appVersionInfo.appName))])]),e("h5",[t._v("Host : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.appVersionInfo.host))])]),e("h5",[t._v("Port : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.appVersionInfo.port))])]),e("h5",[t._v("Base Url : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.getUrl(t.docs.appVersionInfo.baseUrl)))])]),e("h5",[t._v("OS : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.appVersionInfo.os))])]),e("h5",[t._v("Src Folder : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.appVersionInfo.srcFolder))])]),e("h5",[t._v("Modify Count : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.appVersionInfo.version))])]),e("h5",[t._v("Service Count : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.conns.length))])]),e("h5",[t._v("Services : ")]),e("div",{staticClass:"server-card-list"},t._l(t.servers,(function(s){return e("div",t._l(s,(function(t){return e("server-card",{key:"server-"+t.host+"-"+t.port,attrs:{server:t}})})),1)})),0)]),e("div",{staticClass:"info-header"},[t._v("Api Permissions")]),e("api-list",{attrs:{docs:t.docs}})],1),e("div",{staticStyle:{padding:"30px",margin:"60px auto auto"}},[t.load?e("a-skeleton",{attrs:{title:!1,active:""}}):t._e(),t.load?e("a-skeleton",{attrs:{title:!1,active:""}}):t._e(),t.load?e("a-skeleton",{attrs:{title:!1,active:""}}):t._e()],1)])},i=[],r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"api-list"}},[e("a-collapse",{on:{change:t.changeActiveKey}},t._l(t.docs.controllers,(function(s,a,i){return e("a-collapse-panel",{key:i,staticStyle:{background:"rgb(247, 247, 247)","border-radius":"4px","margin-bottom":"4px"},attrs:{"show-arrow":!1}},[e("span",{attrs:{slot:"header"},slot:"header"},[e("a-badge",{attrs:{count:s.length,"number-style":{backgroundColor:"#fff",color:"#999",boxShadow:"0 0 0 1px #d9d9d9 inset"},offset:[15,0]}},[e("span",{staticClass:"controller-name"},[t._v(" "+t._s(a)+" ")])])],1),e("a-collapse",{on:{change:t.changeActiveKey}},t._l(s,(function(s,a){return e("a-collapse-panel",{key:i+"-"+a,staticStyle:{"margin-bottom":"15px"},style:t.methodStyle[s.method],attrs:{"show-arrow":!1}},[e("div",{staticClass:"collapse-header",attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"api-method",class:t.methodColorClass(s.method)},[t._v(t._s(s.method))]),e("div",{staticClass:"api-path"},[e("span",{domProps:{innerHTML:t._s(t.parsePath(s.path))}}),t.hasAuth(s)?e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-shenfenshibierenzheng"}})]):t._e(),t.hasRateLimitR(s)?e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-rate"}})]):t._e(),t.hasRequireLogin(s)?e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-menu_rolepermiss"}})]):t._e(),t.hasParamAuthR(s)?e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-param"}})]):t._e()])]),e("div",{staticStyle:{position:"relative"}},[e("div",{staticClass:"p-tags"},[t.hasAuth(s)||!t.hasRequireLogin(s)||t.hasParamAuthR(s)?t._e():e("a-checkable-tag",{staticStyle:{"background-color":"#5ec940b8",color:"#151515",width:"120px","text-align":"center"},style:t.tagStyle,on:{change:function(e){return t.changeLogin(s)}},model:{value:t.getPath(s).requireLogin,callback:function(e){t.$set(t.getPath(s),"requireLogin",e)},expression:"getPath(v11).requireLogin"}},[t._v(" Login Required ")]),t.hasAuth(s)||t.hasParamAuthR(s)?e("a-tag",{staticStyle:{"background-color":"#5ec940b8",color:"#151515","user-select":"none",width:"120px","text-align":"center"},style:t.tagStyle},[t._v(" "+t._s(t.getPath(s).requireLogin?"Login Required":"No Login Required")+" ")]):t._e(),t.hasAuth(s)?e("a-tag",{staticStyle:{"background-color":"#327af6b0",color:"#151515",cursor:"unset","text-align":"center"},style:t.tagStyle},[t._v(" Auth ")]):t._e(),t.hasParamAuthR(s)?e("a-tag",{staticStyle:{"background-color":"#afd8cab8",color:"#151515",cursor:"unset","text-align":"center"},style:t.tagStyle},[t._v(" Parameter ")]):t._e(),t.hasRateLimitR(s)?e("a-tag",{staticStyle:{"background-color":"#eacc6ab0",color:"#151515",cursor:"unset","text-align":"center"},style:t.tagStyle},[t._v(" RateLimit ")]):t._e(),t.hasAuth(s)||t.hasRateLimitR(s)||t.hasRequireLogin(s)?t._e():e("a-checkable-tag",{staticStyle:{"background-color":"#5ec940b8",color:"#151515",float:"right",width:"120px","text-align":"center"},style:t.tagStyle,on:{change:function(e){return t.changeLogin(s)}},model:{value:t.getPath(s).requireLogin,callback:function(e){t.$set(t.getPath(s),"requireLogin",e)},expression:"getPath(v11).requireLogin"}},[t._v(" 添加 【登录权限】 ")]),t.docs.paths[s.path][s.method].auth?t._e():e("a-tag",{staticStyle:{"background-color":"#327af6b0",color:"#151515",float:"right",cursor:"pointer","text-align":"center"},style:t.tagStyle,on:{click:function(e){return t.addAuth(s)}}},[t._v(" 添加 【接口权限】 ")]),t.hasRateLimit(s)?t._e():e("a-tag",{staticStyle:{"background-color":"#eacc6ab0",color:"#151515",float:"right",cursor:"pointer","text-align":"center"},style:t.tagStyle,on:{click:function(e){return t.addRateLimit(s)}}},[t._v(" 添加 【速率限制】 ")])],1),t.docs.paths[s.path][s.method].auth?e("card",{staticClass:"card-item",attrs:{path:t.docs.paths[s.path][s.method]}}):t._e(),t.docs.paths[s.path][s.method].auth?e("div",{staticClass:"delete delete-api-per",on:{click:function(e){return t.deleteAuth(s)}}},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-delete"}})])]):t._e(),t.docs.paths[s.path][s.method].auth?e("div",{staticClass:"save save-api-per",on:{click:function(e){return t.saveAuth(s)}}},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-save"}})])]):t._e()],1),t.hasParamAuth(s)?e("div",{staticClass:"card-item param-auth"},[e("param-auth",{attrs:{info:s,path:t.getPath(s)}})],1):t._e(),t.hasRateLimit(s)?e("div",{staticClass:"card-item ratelimit"},[e("rate-limit",{attrs:{"rate-limit":t.rateLimit(s)}}),e("div",{staticClass:"delete delete-rate-limit",on:{click:function(e){return t.deleteRateLimit(s)}}},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-delete"}})])]),e("div",{staticClass:"save save-rate-limit",on:{click:function(e){return t.saveRateLimit(s)}}},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-save"}})])])],1):t._e()])})),1)],1)})),1)],1)},n=[],o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card",class:t.s?"compact-item":""},[e("h2",[e("span",{staticClass:"compact",on:{click:t.compact}},[t._v("API权限")])]),e("a-row",[e("a-col",{staticClass:"func-role-back",attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[e("h3",[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-people"}})]),t._v(" Roles ")]),e("div",{staticClass:"card-item-sl div-text-scroll"},[e("h4",{staticClass:"require"},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-require"}})]),t._v(" require ")]),e("and-or-select",{staticClass:"aos",attrs:{items:t.path.auth.requireRoles}}),e("h4",{staticClass:"exclude"},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-p-exclude"}})]),t._v(" exclude ")]),e("and-or-select",{staticClass:"aos",attrs:{items:t.path.auth.excludeRoles}})],1)]),e("a-col",{staticClass:"func-role-back",attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[e("h3",[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-permissions"}})]),t._v(" Permissions ")]),e("div",{staticClass:"card-item-sl div-text-scroll"},[e("h4",{staticClass:"require"},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-account_tree-o"}})]),t._v(" require ")]),e("and-or-select",{staticClass:"aos",attrs:{items:t.path.auth.requirePermissions}}),e("h4",{staticClass:"exclude"},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-p-exclude"}})]),t._v(" exclude ")]),e("and-or-select",{staticClass:"aos",attrs:{items:t.path.auth.excludePermissions}})],1)])],1)],1)},c=[],l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"and-or-select"},[e("div",{staticClass:"items"},[t._l(t.items,(function(s,a){return t.items?e("div",{key:a,staticClass:"role-perms-items",staticStyle:{"margin-bottom":"5px"}},[0!==a?e("div",{staticClass:"and-or-select_or"},[t._v(" OR ")]):t._e(),0!==a?e("sup",{staticClass:"sup-close",on:{click:function(e){return t.closeOr(a)}}},[e("svg",{staticClass:"icon",staticStyle:{"font-size":"8px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-close-circle"}})])]):t._e(),0===a?e("div",{staticClass:"s-delete"},[e("svg",{staticClass:"icon",staticStyle:{"font-size":"12px"},attrs:{"aria-hidden":"true"},on:{click:t.deleteAll}},[e("use",{attrs:{"xlink:href":"#icon-delete"}})])]):t._e(),s.length?t._e():e("div",{staticClass:"and-or-select_val and-or-select_val_add",on:{click:function(e){return t.insert(a)}}},[t._v(" INSERT ")]),t._l(s,(function(i,r){return s?e("div",{key:a+"--"+r,staticClass:"role-perms-item",class:{"role-perms-item_first":0===a&&0===r},style:0!==r?"margin-left: 0px":""},[e("EditorDiv",{staticClass:"role-perms-item_val scroll",attrs:{callback:[a,r],value:s[r]},on:{edit:t.edit,callback:t.modifyStart}}),e("sup",{staticClass:"sup-close",on:{click:function(e){return t.close(a,r)}}},[e("svg",{staticClass:"icon",staticStyle:{"font-size":"8px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-close-circle"}})])]),e("div",{staticClass:"and-or-select_and",class:{"and-or-select_add":r===s.length-1},on:{click:function(e){return t.andAdd(r===s.length-1,a)}}},[t._v(" AND ")])],1):t._e()}))],2):t._e()})),e("div",{staticClass:"role-perms-items"},[e("div",{staticClass:"and-or-select_or and-or-select_add",on:{click:t.orAdd}},[t._v(" OR ")])])],2)])},h=[],u=function(){var t=this,e=t._self._c;return e("div",{ref:"editor",staticClass:"input-box",staticStyle:{"-webkit-user-select":"auto"},attrs:{contenteditable:"true"},on:{input:t.inputText,blur:t.inputBlur,focus:t.inputFocus}})},d=[],p={name:"EditorDiv",props:["value","callback"],data(){return{isBlur:!0}},watch:{value(t){this.isBlur&&(this.$refs.editor.innerHTML=t,this.value=t)}},mounted(){this.$refs.editor.innerHTML=this.value},methods:{inputText(){this.$emit("callback",this.callback),this.$emit("edit",this.$refs.editor.innerHTML)},inputFocus(){this.isBlur=!1},inputBlur(){this.$emit("blur"),this.isBlur=!0}}},m=p,v=(s("ec94"),s("0b56")),g=Object(v["a"])(m,u,d,!1,null,"9749daee",null),f=g.exports,_={name:"AndOrSelect",components:{EditorDiv:f},props:{items:{type:Array}},mounted(){},data(){return{modify:["",""]}},computed:{},methods:{edit(t){this.$set(this.items[this.modify[0]],this.modify[1],t),this.$forceUpdate()},insert(t){this.$set(this.items[t],0,null),this.$forceUpdate()},orAdd(){this.$set(this.items,this.items.length,[]),this.$forceUpdate()},andAdd(t,e){t&&(this.$set(this.items[e],this.items[e].length,""),this.$forceUpdate())},modifyStart(t){this.modify=t},close(t,e){this.$delete(this.items[t],e),this.$forceUpdate()},closeOr(t){this.$delete(this.items,t),this.$forceUpdate()},deleteAll(){this.items.splice(0,this.items.length),this.$forceUpdate()}}},x=_,b=(s("ae74"),Object(v["a"])(x,l,h,!1,null,"6800e716",null)),y=b.exports,C={name:"Card",components:{AndOrSelect:y},props:{path:{type:Object,default:{auth:{requireRoles:[],requirePermissions:[],excludeRoles:[],excludePermissions:[]}}}},created(){this.path.auth?(this.path.auth.requireRoles||this.$set(this.path.auth,"requireRoles",[]),this.path.auth.requirePermissions||this.$set(this.path.auth,"requirePermissions",[]),this.path.auth.excludeRoles||this.$set(this.path.auth,"excludeRoles",[]),this.path.auth.excludePermissions||this.$set(this.path.auth,"excludePermissions",[])):this.$set(this.path,"auth",{requireRoles:[],requirePermissions:[],excludeRoles:[],excludePermissions:[]})},mounted(){},data(){return{s:!1}},methods:{compact(){this.s=!this.s},add(t,e){}}},k=C,$=(s("e16c"),Object(v["a"])(k,o,c,!1,null,"5a5d10d5",null)),R=$.exports,L=function(){var t=this,e=t._self._c;return e("div",{staticClass:"rate-limit",class:t.s?"compact-item":""},[e("h2",[e("span",{staticClass:"compact",on:{click:t.compact}},[t._v("速率限制")])]),e("div",[e("a-row",[e("a-col",{attrs:{xs:24,sm:24,md:14,lg:10,xl:10}},[e("h4",{staticClass:"title"},[t._v("窗口大小【毫秒】")]),e("div",{staticClass:"rate-limit-item window"},[e("a-input",{attrs:{value:t.window},on:{change:t.onChangeWindow}},[e("div",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[t._v("毫秒")])])],1),e("h4",{staticClass:"title"},[t._v("窗口内最大请求数")]),e("div",{staticClass:"rate-limit-item max-requests"},[e("a-input",{attrs:{value:t.maxRequests},on:{change:t.onChangeMaxRequests,blur:t.onChangeMaxRequests}},[e("div",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[t._v("次")])])],1),e("h4",{staticClass:"title"},[t._v("最小间隔【毫秒】（若两次请求间隔低于此值，将拦截 - 0为不做限制）")]),e("div",{staticClass:"rate-limit-item min-interval"},[e("a-input",{attrs:{value:t.minInterval},on:{change:t.onChangeMinInterval}},[e("div",{attrs:{slot:"addonAfter"},slot:"addonAfter"},[t._v("毫秒")])])],1),e("div",{staticClass:"check-type"},[e("a-radio-group",{attrs:{"default-value":t.rateLimit.checkType},on:{change:t.changeType}},[e("a-radio-button",{attrs:{value:"ip"}},[t._v(" ip ")]),e("a-radio-button",{attrs:{value:"userId"}},[t._v(" userId ")])],1)],1)]),e("a-col",{attrs:{xs:24,sm:24,md:10,lg:14,xl:14}},[e("div",{staticClass:"associated-patterns"},[e("h4",{staticClass:"title"},[t._v("关联的路径（当此路径被封禁时，关联的路径也会封禁）")]),e("a-select",{staticStyle:{width:"100%"},attrs:{mode:"tags","default-value":t.rateLimit.associatedPatterns,placeholder:"选择关联的路径"},on:{change:t.handleChange}},t._l(t.paths,(function(s){return e("a-select-option",{key:s},[t._v(" "+t._s(s)+" ")])})),1)],1)])],1),e("div",{staticStyle:{"margin-right":"130px"}},[e("h4",{staticClass:"title"},[t._v("惩罚等级 & 封禁时间【毫秒】")]),e("div",{staticClass:"punishment-time scroll"},[t._l(t.rateLimit.punishmentTime,(function(s,a){return e("div",{key:"punishment-time-item-"+a,staticClass:"punishment-time-item-i"},[e("editor-div",{staticClass:"punishment-time-item scroll",attrs:{value:s,callback:a},on:{callback:t.modify,blur:t.blur,edit:t.punishmentTimeEdit}}),e("sup",{staticClass:"sup-close",on:{click:function(e){return t.close(a)}}},[e("svg",{staticClass:"icon",staticStyle:{"font-size":"8px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-close-circle"}})])]),e("div",[t._v("->")])],1)})),e("div",{staticClass:"time-add",on:{click:t.addTime}},[t._v("ADD")])],2)])],1)])},w=[],S=s("7736"),P={name:"RateLimit",components:{EditorDiv:f},props:{rateLimit:{type:Object,default:{window:0,maxRequests:0,minInterval:0,associatedPatterns:[]}}},data(){return{top:10,i:-1,window:0,minInterval:0,maxRequests:0,s:!1}},computed:{...Object(S["c"])(["docs"]),paths(){let t=[];for(let e in this.docs.paths)for(let s in this.docs.paths[e])t.push(`${s} ${e}`);return t}},created(){this.maxRequests=Number(this.rateLimit.maxRequests),this.window=Number(this.rateLimit.window),this.minInterval=Number(this.rateLimit.minInterval)},methods:{compact(){this.s=!this.s},close(t){this.$delete(this.rateLimit.punishmentTime,t)},changeType(t){this.$message.info("检查类型为 "+t.target.value)},blur(){this.rateLimit.punishmentTime.sort((t,e)=>t-e),this.$forceUpdate()},modify(t){this.i=t},addTime(t){let e=this.rateLimit.punishmentTime.length;0===e?this.rateLimit.punishmentTime.push(1e3):this.rateLimit.punishmentTime.push(2*this.rateLimit.punishmentTime[e-1])},punishmentTimeEdit(t){let e=Number(t);isNaN(e)?this.rateLimit.punishmentTime[this.i]=0:this.rateLimit.punishmentTime[this.i]=e},handleChange(t){this.rateLimit.associatedPatterns=t},onChangeMinInterval(t){isNaN(Number(t.target.value))?this.minInterval=0:this.minInterval=Number(t.target.value),this.rateLimit.minInterval=this.minInterval},onChangeWindow(t){isNaN(Number(t.target.value))?this.window=0:this.window=Number(t.target.value),this.rateLimit.window=this.window},onChangeMaxRequests(t){isNaN(Number(t.target.value))?this.maxRequests=0:this.maxRequests=Number(t.target.value),this.rateLimit.maxRequests=this.maxRequests}}},q=P,A=(s("5443"),Object(v["a"])(q,L,w,!1,null,"6aa9dab7",null)),M=A.exports,O=function(){var t=this,e=t._self._c;return e("div",{staticClass:"param-auth-page",class:t.s?"compact-item":""},[e("h2",[e("span",{staticClass:"compact",on:{click:t.compact}},[t._v("参数权限")])]),e("param-auth-value",{attrs:{info:t.info,path:t.path,"param-info":t.path.paramAuth}})],1)},T=[],I=function(){var t=this,e=t._self._c;return e("div",[e("a-tabs",{attrs:{"default-active-key":0}},t._l(t.paramInfo,(function(s,a,i){return e("a-tab-pane",{key:i},[e("span",{attrs:{slot:"tab"},slot:"tab"},["pathVariable"===s.paramType?e("a-icon",{attrs:{type:"build",theme:"twoTone"}}):e("a-icon",{attrs:{type:"api",theme:"twoTone"}}),t._v(" "+t._s(a)+" ("+t._s(s.valueType)+") ")],1),"other"===s.valueMatchType?e("div",{staticClass:"non"},[t._v("暂时无法配置")]):t._l(s.paramMetaList,(function(i,r){return e("a-row",{key:"param-meta-one-auth-"+r,staticClass:"param-meta-one-auth"},[e("div",{staticClass:"delete delete-param-meta",on:{click:function(e){return t.deleteParamMeta(s,a,r)}}},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-delete"}})])]),e("div",{staticClass:"save save-param-meta",on:{click:function(e){return t.saveParamParamMeta(s,a,r)}}},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-save"}})])]),e("a-col",{staticStyle:{"text-align":"center"},attrs:{xs:24,sm:24,md:13,lg:10,xl:10}},[e("div",{staticClass:"param-inner-rr div-text-scroll"},[e("h3",[t._v("Resource （ 限制 访问此资源 "),e("span",{staticStyle:{color:"green"}},[t._v("需要")]),t._v(" 某 "),e("span",{staticStyle:{color:"#ce7e49"}},[t._v("身份｜权限")]),t._v(" ）")]),t._l(i.resources,(function(t,a){return e("div",{key:"resources-"+r+"-"+t+"-"+a,staticClass:"range-input"},[e("range-input",{attrs:{"value-type":s.valueType,"value-match-type":s.valueMatchType,items:i.resources,"item-index":a}})],1)})),e("a-button",{staticClass:"add-rr-button",attrs:{type:"dashed"},on:{click:function(e){return t.addResources(i)}}},[t._v(" 新增 ")]),e("h3",[t._v("Range （ 限制 某 "),e("span",{staticStyle:{color:"#ce7e49"}},[t._v("身份｜权限")]),t._v(" "),e("span",{staticStyle:{color:"red"}},[t._v("只能")]),t._v(" 访问此资源 ） ")]),t._l(i.range,(function(t,a){return e("div",{key:"range-"+r+"-"+t+"-"+a,staticClass:"range-input"},[e("range-input",{attrs:{"value-type":s.valueType,"value-match-type":s.valueMatchType,items:i.range,"item-index":a}})],1)})),e("a-button",{staticClass:"add-rr-button",attrs:{type:"dashed"},on:{click:function(e){return t.addRange(i)}}},[t._v(" 新增 ")])],2)]),e("a-col",{attrs:{xs:24,sm:24,md:11,lg:14,xl:14}},[e("h3",{staticStyle:{"text-align":"center"}},[e("span",{staticStyle:{color:"#ce7e49"}},[t._v("身份｜权限")])]),e("a-row",{staticClass:"param-inner-role-permissions div-text-scroll"},[e("a-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:12}},[e("h4",[t._v("Roles")]),e("div",{staticStyle:{"margin-left":"10px"}},[e("h5",[t._v("Require")]),e("and-or-select",{staticClass:"div-text-scroll",attrs:{items:i.requireRoles}}),e("h5",[t._v("Exclude")]),e("and-or-select",{staticClass:"div-text-scroll",attrs:{items:i.excludeRoles}})],1)]),e("a-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:12}},[e("h4",[t._v("Permissions")]),e("div",{staticStyle:{"margin-left":"10px"}},[e("h5",[t._v("Require")]),e("and-or-select",{staticClass:"div-text-scroll",attrs:{items:i.requirePermissions}}),e("h5",[t._v("Exclude")]),e("and-or-select",{staticClass:"div-text-scroll",attrs:{items:i.excludePermissions}})],1)])],1)],1)],1)})),t.toSave[a]?t._e():e("div",{staticClass:"param-meta-one-auth param-meta-one-auth-add",on:{click:function(e){return t.addMeta(s,a)}}},[t._v("新增")])],2)})),1)],1)},N=[],j=function(){var t=this,e=t._self._c;return e("a-input-group",{attrs:{compact:""}},[e("a-select",{attrs:{"default-value":t.sp,disabled:"range"!==t.valueMatchType},on:{change:t.change}},[e("a-select-option",{attrs:{value:1}},[t._v(" 相等 ")]),e("a-select-option",{attrs:{value:2}},[t._v(" 范围 ")])],1),e("a-auto-complete",{staticStyle:{"text-align":"center",transition:"unset"},style:2===t.sp?"width: 110px;":"width: 250px;",attrs:{"filter-option":t.filterOption,"option-label-prop":"value",placeholder:"最小值",open:t.focusMinV},on:{select:t.selectMin,blur:t.inputBlurMin,focus:t.focusMin},model:{value:t.v1,callback:function(e){t.v1=e},expression:"v1"}},[e("template",{slot:"dataSource"},t._l(t.args,(function(s){return e("a-select-option",{key:"min"-s,attrs:{value:s.split(":")[0].trim()}},[t._v(" "+t._s(s)+" ")])})),1)],2),2===t.sp?e("a-input",{staticStyle:{width:"30px","pointer-events":"none","background-color":"#fff",transition:"unset"},attrs:{placeholder:"-",disabled:""}}):t._e(),2===t.sp?e("a-auto-complete",{staticStyle:{width:"110px","text-align":"center",transition:"unset"},attrs:{open:t.focusMaxV,"filter-option":t.filterOption,"option-label-prop":"value",placeholder:"最大值"},on:{focus:t.focusMax,select:t.selectMax,blur:t.inputBlurMax},model:{value:t.v2,callback:function(e){t.v2=e},expression:"v2"}},[e("template",{slot:"dataSource"},t._l(t.args,(function(s){return e("a-select-option",{key:"max"-s,attrs:{value:s.split(":")[0].trim()}},[t._v(" "+t._s(s)+" ")])})),1)],2):t._e()],1)},V=[],U=(s("6742"),{name:"RangeInput",props:{items:{type:Array},itemIndex:{type:Number},valueMatchType:{type:String},valueType:{type:String}},data(){return{sp:1,v1:null,v2:null,int_arr:["int","long","byte","biginteger"],float_arr:["double","float","bigdecimal"],regex:/#{.*}/,selectedItems:["x"],value:"",argsRaw:[],focusMinV:!1,focusMaxV:!1}},created(){let t=this.items[this.itemIndex].split("-");this.v1=t[0],2===t.length&&(this.v2=t[1]),this.sp=t.length,this.argsRaw=Object.keys(this.docs.argResource)},methods:{focusMin(){this.focusMinV=!0},focusMax(){this.focusMaxV=!0},selectMin(t,e){this.v1=t,this.focusMinV=!1},selectMax(t,e){this.v2=t,this.focusMaxV=!1},filterOption(t,e){return e.componentOptions.children[0].text.toUpperCase().indexOf(t.toUpperCase())>=0},formatValue(t){if(this.regex.test(t)){let e=this.regex.exec(t),s=e.input.substring(2,e.input.length-1);if(this.argsRaw.includes(s.split(".")[0]))return e.input}if(this.int_arr.includes(this.valueType)){let e=parseInt(t);return isNaN(e)?0:e}if(this.float_arr.includes(this.valueType)){let e=parseFloat(t);return isNaN(e)?0:e}return t},inputBlurMin(t){this.v1=this.formatValue((""+t).trim()),this.concat(),this.focusMinV=!1},inputBlurMax(t){this.v2=this.formatValue((""+t).trim()),this.concat(),this.focusMaxV=!1},concat(){let t;t=2===this.sp?`${this.v1}-${this.v2}`:""+this.v1,this.$set(this.items,this.itemIndex,t)},change(t){this.sp=t}},computed:{...Object(S["c"])(["docs"]),args(){return Object.keys(this.docs.argResource).map(t=>`#{${t}} ${this.docs.argResource[t].description?": "+this.docs.argResource[t].description:""}`)}}}),E=U,D=Object(v["a"])(E,j,V,!1,null,"7bccfa1d",null),B=D.exports,z={name:"ParamAuthValue",components:{RangeInput:B,AndOrSelect:y},props:{info:{},path:{},paramInfo:{type:Object,default:{"":{paramType:"",valueMatchType:"",paramMetaList:[{resources:[],range:[]}],clz:""}}}},data(){return{toSave:{}}},created(){for(let t in this.paramInfo){let e=this.paramInfo[t];if("other"!==e.valueMatchType)if(e.paramMetaList)for(let t in e.paramMetaList){let s=e.paramMetaList[t];s.requireRoles||this.$set(s,"requireRoles",[]),s.excludeRoles||this.$set(s,"excludeRoles",[]),s.requirePermissions||this.$set(s,"requirePermissions",[]),s.excludePermissions||this.$set(s,"excludePermissions",[])}else this.$set(e,"paramMetaList",[])}},computed:{},methods:{saveParamParamMeta(t,e,s){if(s!==this.toSave[e]&&this.toSave[e])return void this.$message.warning("还有未保存的配置");let a=t.paramMetaList[s],i={operate:"update",target:"parameter",method:this.info.method,api:this.info.path,paramName:e,index:s,...a};this.$http.post("/operate",i).then(i=>{if(100===i.code){this.toSave[e]&&s===this.toSave[e]&&this.$delete(this.toSave,e);let r=i.data;r.requireRoles||(r.requireRoles=[]),r.requirePermissions||(r.requirePermissions=[]),r.excludeRoles||(r.excludeRoles=[]),r.excludePermissions||(r.excludePermissions=[]),r.range||(r.range=[]),r.resources||(r.resources=[]),a=r,this.$set(t.paramMetaList,s,a),this.$message.success("成功")}else a={requireRoles:[],requirePermissions:[],excludeRoles:[],excludePermissions:[],range:[],resources:[]},this.$set(t.paramMetaList,s,a)})},deleteParamMeta(t,e,s){const a=this.$createElement;this.$confirm({title:`确认删除接口 ${this.info.method} ${this.info.path} 下的 ${e} 的参数权限 ?`,content:t=>t("div",{style:"color:red;"},["删除后将不做权限保护"]),onOk:()=>{if(this.toSave[e]&&s===this.toSave[e]&&this.$delete(this.toSave,e),this.$delete(t.paramMetaList,s),this.path.hasParamAuth){let t={operate:"delete",target:"parameter",api:this.info.path,method:this.info.method,index:s,paramName:e};this.$http.post("/operate",t).then(t=>{100===t.code?this.$message.success(a("div",{style:"margin-top: 10px"},[a("div",["参数 : ",this.info.method," ",this.info.path," - ",e," "]),a("div",["参数权限删除成功"])])):this.$message.error("删除失败，网络异常")})}this.$set(this.path,"hasParamAuth",!1)}})},change(t){},addMeta(t,e){this.toSave[e]?this.$message.warning("还有未保存的配置"):(t.paramMetaList||this.$set(t,"paramMetaList",[]),t.paramMetaList.push({requireRoles:[],excludeRoles:[],excludePermissions:[],requirePermissions:[]}),this.toSave[e]=t.paramMetaList.length-1)},addRange(t){t.range||this.$set(t,"range",[]),t.range.push("0")},addResources(t){t.resources||this.$set(t,"resources",[]),t.resources.push("0")}}},H=z,F=(s("a13a"),Object(v["a"])(H,I,N,!1,null,"733d1156",null)),K=F.exports,J={name:"ParamAuth",components:{ParamAuthValue:K},props:{info:{},path:{type:Object,default:{paramInfo:{},paramAuth:{}}}},created(){},data(){return{s:!1}},methods:{compact(){this.s=!this.s}}},W=J,G=(s("3006"),Object(v["a"])(W,O,T,!1,null,"8ed95c8e",null)),Q=G.exports,X={name:"ApiList",components:{ParamAuth:Q,RateLimit:M,Card:R},props:{docs:{type:Object,default:{controllers:[],paths:{paramAuth:{},rateLimit:{}}}}},data(){return{tagStyle:"margin-bottom: 5px;margin-left: 5px;",methodStyle:{GET:"background-color: rgba(97,175,254,.1);",POST:"background-color: rgba(73,204,144,.1);",HEAD:"background-color: rgba(144,18,254,.1);",PUT:"background-color: rgba(252,161,48,.1);",DELETE:"background-color: rgb(249,62,62,.1)",OPTIONS:"background-color: rgb(13,90,167,.1);",PATCH:"background-color: rgba(80,227,194,.1);"}}},methods:{hasRateLimit(t){return!!this.docs.paths[t.path][t.method].rateLimit},hasParamAuth(t){return Object.keys(this.docs.paths[t.path][t.method].paramAuth).length>0},hasParamAuthR(t){return this.docs.paths[t.path][t.method].hasParamAuth},hasRateLimitR(t){return this.getPath(t).hasRateLimit},rateLimit(t){return this.docs.paths[t.path][t.method].rateLimit},hasAuth(t){return this.getPath(t).hasAuth},hasRequireLogin(t){return this.getPath(t).requireLogin},getPath(t){return this.docs.paths[t.path][t.method]},deleteRateLimit(t){const e=this.$createElement;this.$confirm({title:"确认删除RateLimit?",content:t=>t("div",{style:"color:red;"},["删除后接口的请求速率将不做保护"]),onOk:()=>{if(this.$delete(this.docs.paths[t.path][t.method],"rateLimit"),this.docs.paths[t.path][t.method].hasRateLimit){let s={operate:"delete",target:"rate",api:t.path,method:t.method};this.$http.post("/operate",s).then(s=>{100===s.code?this.$message.success(e("div",{style:"margin-top: 10px"},[e("div",["接口 : ",t.method," ",t.path]),e("div",["速率权限删除成功"])])):this.$message.error("删除失败，网络异常")})}this.$set(this.docs.paths[t.path][t.method],"hasRateLimit",!1)}})},saveRateLimit(t){const e=this.$createElement;let s=this.rateLimit(t),a={operate:"update",target:"rate",api:t.path,method:t.method,rateLimit:s};this.$http.post("/operate",a).then(s=>{100===s.code?(this.$set(this.docs.paths[t.path][t.method],"hasRateLimit",!0),this.docs.paths[t.path][t.method].rateLimit=s.data.rateLimit,this.$message.success(e("div",{style:"margin-top: 10px"},[e("div",["接口 : ",t.method," ",t.path]),e("div",["速率权限已修改"])]))):this.$message.error("修改失败")})},addRateLimit(t){this.docs.paths[t.path][t.method].rateLimit={window:1e4,maxRequests:3,minInterval:0,checkType:"ip",punishmentTime:[3e3,5e3,1e4]},this.$forceUpdate()},deleteAuth(t){const e=this.$createElement;this.$confirm({title:"确认删除 Auth ?",content:t=>t("div",{style:"color:red;"},["删除后的接口将不做权限保护"]),onOk:()=>{if(this.$delete(this.docs.paths[t.path][t.method],"auth"),this.docs.paths[t.path][t.method].hasAuth){let s={operate:"delete",target:"api",api:t.path,method:t.method};this.$http.post("/operate",s).then(s=>{100===s.code?(this.$message.success(e("div",{style:"margin-top: 10px"},[e("div",["接口 : ",t.method," ",t.path]),e("div",["API权限删除成功"])])),this.$set(this.docs.paths[t.path][t.method],"requireLogin",s.data.requireLogin)):this.$message.error("删除失败，网络异常")})}this.$set(this.docs.paths[t.path][t.method],"hasAuth",!1)}})},addAuth(t){this.docs.paths[t.path][t.method].auth={},this.$forceUpdate()},saveAuth(t){let e=this.docs.paths[t.path][t.method].auth,s={operate:"update",target:"api",method:t.method,api:t.path,role:{require:e.requireRoles,exclude:e.excludeRoles},permission:{require:e.requirePermissions,exclude:e.excludePermissions}};this.$http.post("/operate",s).then(e=>{if(100===e.code){let s=e.data;s.auth?(s.auth.requireRoles||(s.auth.requireRoles=[]),s.auth.requirePermissions||(s.auth.requirePermissions=[]),s.auth.excludeRoles||(s.auth.excludeRoles=[]),s.auth.excludePermissions||(s.auth.excludePermissions=[])):s.auth={requireRoles:[],requirePermissions:[],excludeRoles:[],excludePermissions:[]},this.$set(this.docs.paths[t.path],t.method,s),this.$message.success("保存成功，已自动去重")}else this.$message.error("保存失败")})},changeActiveKey(t){},changeLogin(t){const e=this.$createElement;let s=this.hasRequireLogin(t),a={target:"login",method:t.method,api:t.path,value:s};this.$http.post("/operate",a).then(a=>{100===a.code?this.$message.success(e("div",{style:"margin-top: 10px"},[e("div",["接口 : ",t.method," ",t.path]),e("div",["登录权限已修改 : ",s?" Login Required ":" No Login Required "])])):(this.getPath(t).requireLogin=!s,this.$message.error("接口登录权限修改失败"))})},methodColorClass(t){return"api-method-"+t.toLowerCase()},parsePath(t){let e="";do{let s=t.search(/{.*?}/g);if(-1===s)break;let a=t.indexOf("}",s);e+=`${t.substring(0,s)}<span style="color: var(--main-color)">${t.substring(s,a+1)}</span>`,t=t.substring(a+1)}while(1);return e||t}}},Y=X,Z=(s("28c1"),Object(v["a"])(Y,r,n,!1,null,"1f74c37b",null)),tt=Z.exports,et=s("cc33"),st=function(){var t=this,e=t._self._c;return e("a",{ref:"a",staticClass:"server-card-a",class:{"not-allowed":!t.server.dashboard},attrs:{href:t.url,target:"_blank"},on:{click:function(e){return e.preventDefault(),t.click.apply(null,arguments)}}},[e("div",{staticClass:"server-card",class:{"not-allowed":!t.server.dashboard,allowed:t.server.dashboard}},[t.server.dashboard&&!t.eq?e("svg",{staticClass:"icon",staticStyle:{"margin-left":"10px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-server"}})]):t._e(),t.server.dashboard?t._e():e("svg",{staticClass:"icon",staticStyle:{"margin-left":"10px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-ban"}})]),t.server.dashboard&&t.eq?e("svg",{staticClass:"icon",staticStyle:{"margin-left":"10px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-targeting"}})]):t._e(),e("div",{staticClass:"server-info"},[e("div",[t._v("host: "+t._s(t.server.host))]),e("div",[t._v("port: "+t._s(t.server.port))])])])])},at=[];const it=function(t,e){let s=window.location.href.indexOf(":"),a=window.location.href.substring(0,s);return e?`${a}://${t}:${e}`:`${a}://${t}`};var rt={name:"ServerCard",props:{server:{type:Object,default:{dashboard:null}}},computed:{...Object(S["c"])(["currentServer"]),url(){return this.server.dashboard?`${it(this.server.dashboard)}#/?uuid=${Object(et["b"])()}`:""},eq(){return this.server.appName===this.currentServer.appName&&this.server.application===this.currentServer.application&&this.server.port===this.currentServer.port&&this.server.host===this.currentServer.host}},data(){return{}},mounted(){},methods:{click(){this.server.dashboard?window.open(this.url,"_blank"):this.$message.warning("Dashboard is not allowed")}}},nt=rt,ot=(s("bdd4"),Object(v["a"])(nt,st,at,!1,null,"611e8af4",null)),ct=ot.exports,lt=(s("731e"),{name:"Index",components:{ServerCard:ct,ApiList:tt},data(){return{load:!0}},methods:{...Object(S["b"])(["setServer","setDocs"]),getUrl(t,e){let s=window.location.href.indexOf(":"),a=window.location.href.substring(0,s);return e?`${a}://${t}:${e}`:`${a}://${t}`}},computed:{...Object(S["c"])(["docs"]),token(){return Object(et["b"])()},servers(){let t=0,e=[],s=[];for(let a=0,i=0;a<this.docs.conns.length;a++)0!==a&&i%5===0&&(e[t++]=s,i%=5,s=[]),s[i++]=this.docs.conns[a];return e[t]=s,e}},mounted(){this.$http.get("/docs").then(t=>{this.setDocs(t),this.setServer(this.docs.appVersionInfo),this.load=!1})}}),ht=lt,ut=(s("f087"),Object(v["a"])(ht,a,i,!1,null,"d9176336",null));e["default"]=ut.exports},dd9f:function(t,e,s){"use strict";s("a27f")},e16c:function(t,e,s){"use strict";s("869a")},e620:function(t,e,s){},ec94:function(t,e,s){"use strict";s("2e59")},f087:function(t,e,s){"use strict";s("4366")}}]);