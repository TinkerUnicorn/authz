(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["index"],{"11b0":function(t,e,s){"use strict";s("86be")},"22a7":function(t,e,s){"use strict";s("4ff6")},"24e7":function(t,e,s){},"24e9":function(t,e,s){"use strict";s("f6b8")},3115:function(t,e,s){"use strict";s("5bef")},"4e59":function(t,e,s){},"4ff6":function(t,e,s){},"5bef":function(t,e,s){},"7a12":function(t,e,s){"use strict";s("bd76")},"86be":function(t,e,s){},"9ced":function(t,e,s){"use strict";s("24e7")},a55b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"login"},[e("div",{staticClass:"container",attrs:{id:"container"}},[e("div",{staticClass:"form-container sign-in-container"},[e("div",{staticClass:"form"},[e("h1",[t._v("Authz Dashboard")]),e("span",[t._v("use your account")]),e("input",{directives:[{name:"model",rawName:"v-model:value",value:t.username,expression:"username",arg:"value"}],attrs:{type:"text",placeholder:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model:value",value:t.password,expression:"password",arg:"value"}],attrs:{type:"password",placeholder:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),e("button",{attrs:{disabled:t.waitLogin},on:{click:t.doLogin}},[t._v(t._s(t.waitLogin?"Waiting...":"Login"))])])])])])},i=[],r=s("7736"),o=s("cc33"),n=s("fa7d"),c={name:"Login",data(){return{username:"",password:"",waitLogin:!1,ok:!1}},methods:{...Object(r["b"])(["setUser"]),doLogin(){if(this.waitLogin)return void this.$message.warning("waiting");if(this.ok)return;this.waitLogin=!0;let t=this.username,e=this.password,s={username:t,password:e};this.$http.post(n["b"]+"/user/login",s).then(e=>{100===e.data.code?(this.$notification.success({message:"Successful: "+t,duration:3}),this.setUser(e.data.data.username),Object(o["c"])(e.data.data.uuid),this.$router.push("/").catch(t=>{}),this.ok=!0):(this.password="",this.$message.error("Account password error")),this.waitLogin=!1})}},created(){}},l=c,d=(s("11b0"),s("0b56")),u=Object(d["a"])(l,a,i,!1,null,"2dc01032",null);e["default"]=u.exports},bb51:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[t._v(" Home ")])},i=[],r={name:"Home",data(){return{}},methods:{}},o=r,n=s("0b56"),c=Object(n["a"])(o,a,i,!1,null,"35b42202",null);e["default"]=c.exports},bd76:function(t,e,s){},bdd4:function(t,e,s){"use strict";s("4e59")},d504:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return t.load?e("div",{attrs:{id:"index"}},[e("div",{staticClass:"info-header"},[t._v("Authz "+t._s(t.docs.authz?"-"+t.docs.authz:""))]),e("div",{staticClass:"info-content"},[e("h5",[t._v(t._s(t.docs.info.title)+" "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.info.version))])]),e("div",{staticStyle:{"margin-left":"10px"}},[e("h6",[t._v("api description: "),e("a",{attrs:{target:"_blank",href:`${t.getUrl(t.docs.appVersionInfo.dashboardApiHelper)}${t.token?"?uuid="+t.token:""}`}},[t._v(" "+t._s(t.getUrl(t.docs.appVersionInfo.dashboardApiHelper))+" ")])]),e("h6",[t._v("api docs: "),e("a",{attrs:{target:"_blank",href:`${t.getUrl(t.docs.appVersionInfo.dashboardDocs)}${t.token?"?uuid="+t.token:""}`}},[t._v(" "+t._s(t.getUrl(t.docs.appVersionInfo.dashboardDocs))+" ")])])]),e("h5",[t._v("license:")]),e("div",{staticStyle:{"margin-left":"10px"}},[e("h6",[t._v(t._s(t.docs.license.name)+" : "),e("a",{staticClass:"license-url",attrs:{target:"_blank",href:t.docs.license.url}},[t._v(" "+t._s(t.docs.license.url)+" ")])])]),e("h5",[t._v("description:")]),e("div",{staticStyle:{"margin-left":"10px"}},[e("div",[t._v(t._s(t.docs.info.description))])])]),e("div",{staticClass:"info-header"},[t._v(" Server ")]),e("div",{staticClass:"info-content"},[e("h5",[t._v("Application : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.appVersionInfo.application))])]),e("h5",[t._v("App Name : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.appVersionInfo.appName))])]),e("h5",[t._v("Host : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.appVersionInfo.host))])]),e("h5",[t._v("Port : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.appVersionInfo.port))])]),e("h5",[t._v("Base Url : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.getUrl(t.docs.appVersionInfo.baseUrl)))])]),e("h5",[t._v("OS : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.appVersionInfo.os))])]),e("h5",[t._v("Src Folder : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.appVersionInfo.srcFolder))])]),e("h5",[t._v("Modify Count : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.appVersionInfo.version))])]),e("h5",[t._v("Service Count : "),e("span",{staticClass:"h-inner-content"},[t._v(t._s(t.docs.conns.length))])]),e("h5",[t._v("Services : ")]),e("div",{staticClass:"server-card-list"},t._l(t.servers,(function(s){return e("div",t._l(s,(function(t){return e("server-card",{key:"server-"+t.host+"-"+t.port,attrs:{server:t}})})),1)})),0)]),e("div",{staticClass:"info-header"},[t._v("Api Permissions")]),e("api-list",{attrs:{docs:t.docs}})],1):t._e()},i=[],r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"api-list"}},[e("a-collapse",{on:{change:t.changeActiveKey}},t._l(t.docs.controllers,(function(s,a,i){return e("a-collapse-panel",{key:i,staticStyle:{background:"rgb(247, 247, 247)","border-radius":"4px","margin-bottom":"4px"},attrs:{"show-arrow":!1}},[e("span",{attrs:{slot:"header"},slot:"header"},[e("a-badge",{attrs:{count:s.length,"number-style":{backgroundColor:"#fff",color:"#999",boxShadow:"0 0 0 1px #d9d9d9 inset"},offset:[15,0]}},[e("span",{staticClass:"controller-name"},[t._v(" "+t._s(a)+" ")])])],1),e("a-collapse",{on:{change:t.changeActiveKey}},t._l(s,(function(s,a){return e("a-collapse-panel",{key:i+"-"+a,staticStyle:{"margin-bottom":"15px"},style:t.methodStyle[s.method],attrs:{"show-arrow":!1}},[e("div",{staticClass:"collapse-header",attrs:{slot:"header"},slot:"header"},[e("span",{staticClass:"api-method",class:t.methodColorClass(s.method)},[t._v(t._s(s.method))]),e("div",{staticClass:"api-path"},[e("span",{domProps:{innerHTML:t._s(t.parsePath(s.path))}}),t.hasAuth(s)?e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-menu_rolepermiss"}})]):t._e(),t.hasRateLimit(s)?e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-rate"}})]):t._e(),t.hasRequireLogin(s)?e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-Login"}})]):t._e()])]),e("div",{staticStyle:{position:"relative"}},[e("div",{staticClass:"p-tags"},[t.hasAuth(s)?e("a-tag",{staticStyle:{"background-color":"var(--success-color)","user-select":"none",color:"white","margin-bottom":"5px",width:"120px","text-align":"center"}},[t._v(" "+t._s(t.getPath(s).requireLogin?"Login Required":"No Login Required")+" ")]):e("a-checkable-tag",{staticStyle:{"margin-bottom":"5px",width:"120px","text-align":"center"},on:{change:function(e){return t.handleChange(s)}},model:{value:t.getPath(s).requireLogin,callback:function(e){t.$set(t.getPath(s),"requireLogin",e)},expression:"getPath(v11).requireLogin"}},[t._v(" "+t._s(t.getPath(s).requireLogin?"Login Required":"No Login Required")+" ")]),t.hasAuth(s)?e("a-tag",{staticStyle:{"background-color":"var(--main-color) !important",color:"white",cursor:"unset","margin-bottom":"5px","text-align":"center"}},[t._v(" Auth ")]):t._e()],1),e("card",{staticClass:"card-item div-text-scroll",attrs:{path:t.docs.paths[s.path][s.method],rateLimit:t.rateLimit(s)}}),e("div",{staticClass:"save",on:{click:function(e){return t.save(s)}}},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-save"}})])])],1)])})),1)],1)})),1)],1)},o=[],n=s("cc33"),c=function(){var t=this,e=t._self._c;return e("div",{staticClass:"card"},[e("div",[e("h3",[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-people"}})]),t._v(" Roles ")]),e("div",{staticClass:"card-item-sl"},[e("h4",{staticClass:"require"},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-require"}})]),t._v(" require ")]),e("and-or-select",{attrs:{items:t.path.auth.requireRoles}}),e("h4",{staticClass:"exclude"},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-exclude"}})]),t._v(" exclude ")]),e("and-or-select",{attrs:{items:t.path.auth.excludeRoles}})],1)]),e("div",[e("h3",[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-permissions"}})]),t._v(" Permissions ")]),e("div",{staticClass:"card-item-sl"},[e("h4",{staticClass:"require"},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-account_tree-o"}})]),t._v(" require ")]),e("and-or-select",{attrs:{items:t.path.auth.requirePermissions}}),e("h4",{staticClass:"exclude"},[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-p-exclude"}})]),t._v(" exclude ")]),e("and-or-select",{attrs:{items:t.path.auth.excludePermissions}})],1)])])},l=[],d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"and-or-select"},[e("div",{ref:"requireRoles",staticClass:"requireRoles"},[t._l(t.items,(function(s,a){return t.items?e("div",{key:a,staticClass:"role-perms-items",staticStyle:{"margin-bottom":"5px"}},[0!==a?e("div",{staticClass:"and-or-select_or"},[t._v(" OR ")]):t._e(),0!==a?e("sup",{staticClass:"sup-close",on:{click:function(e){return t.closeOr(a)}}},[e("svg",{staticClass:"icon",staticStyle:{"font-size":"8px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-close-circle"}})])]):t._e(),0===a?e("div",{staticClass:"s-delete"},[e("svg",{staticClass:"icon",staticStyle:{"font-size":"12px"},attrs:{"aria-hidden":"true"},on:{click:t.deleteAll}},[e("use",{attrs:{"xlink:href":"#icon-delete"}})])]):t._e(),s.length?t._e():e("div",{staticClass:"and-or-select_val and-or-select_val_add",on:{click:function(e){return t.insert(a)}}},[t._v(" INSERT ")]),t._l(s,(function(i,r){return s?e("div",{key:a+"--"+r,staticClass:"role-perms-item",class:{"role-perms-item_first":0===a&&0===r},style:0!==r?"margin-left: 0px":""},[e("EditorDiv",{staticClass:"role-perms-item_val scroll",attrs:{callback:[a,r],value:s[r]},on:{edit:t.edit,callback:t.modifyStart}}),e("sup",{staticClass:"sup-close",on:{click:function(e){return t.close(a,r)}}},[e("svg",{staticClass:"icon",staticStyle:{"font-size":"8px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-close-circle"}})])]),e("div",{staticClass:"and-or-select_and",class:{"and-or-select_add":r===s.length-1},on:{click:function(e){return t.andAdd(r===s.length-1,a)}}},[t._v(" AND ")])],1):t._e()}))],2):t._e()})),e("div",{staticClass:"role-perms-items"},[e("div",{staticClass:"and-or-select_or and-or-select_add",on:{click:t.orAdd}},[t._v(" OR ")])])],2)])},u=[],h=function(){var t=this,e=t._self._c;return e("div",{ref:"editor",staticClass:"input-box",attrs:{contenteditable:"true"},on:{input:t.inputText,blur:t.inputBlur,focus:t.inputFocus}})},p=[],v={name:"EditorDiv",props:["value","callback"],data(){return{isBlur:!0}},watch:{value(t){this.isBlur&&(this.$refs.editor.innerHTML=t,this.value=t)}},mounted(){this.$refs.editor.innerHTML=this.value},methods:{inputText(){this.$emit("callback",this.callback),this.$emit("edit",this.$refs.editor.innerHTML)},inputFocus(){this.isBlur=!1},inputBlur(){this.isBlur=!0}}},m=v,g=(s("7a12"),s("0b56")),f=Object(g["a"])(m,h,p,!1,null,"53ee8988",null),_=f.exports,b={name:"AndOrSelect",components:{EditorDiv:_},props:{items:{type:Array}},mounted(){},data(){return{modify:["",""]}},computed:{},methods:{edit(t){this.$set(this.items[this.modify[0]],this.modify[1],t)},insert(t){console.log("insert"),console.log(t),this.$set(this.items[t],0,null)},orAdd(){console.log(this.items),this.$set(this.items,this.items.length,[])},andAdd(t,e){t&&this.$set(this.items[e],this.items[e].length,"")},modifyStart(t){this.modify=t},close(t,e){this.$delete(this.items[t],e)},closeOr(t){this.$delete(this.items,t)},deleteAll(){this.items.splice(0,this.items.length)},save(t,e){console.log(t,e),console.log(this.items[t][e])}}},x=b,C=(s("3115"),Object(g["a"])(x,d,u,!1,null,"1013fe2f",null)),k=C.exports,$={name:"Card",components:{AndOrSelect:k},props:{path:{type:Object,default:{auth:{requireRoles:[],requirePermissions:[],excludeRoles:[],excludePermissions:[]}}},rateLimit:{type:Object}},created(){this.path.auth?(this.path.auth.requireRoles||this.$set(this.path.auth,"requireRoles",[]),this.path.auth.requirePermissions||this.$set(this.path.auth,"requirePermissions",[]),this.path.auth.excludeRoles||this.$set(this.path.auth,"excludeRoles",[]),this.path.auth.excludePermissions||this.$set(this.path.auth,"excludePermissions",[])):this.$set(this.path,"auth",{requireRoles:[],requirePermissions:[],excludeRoles:[],excludePermissions:[]})},mounted(){},data(){return{}},methods:{add(t,e){console.log(t),console.log(e)}}},w=$,L=(s("22a7"),Object(g["a"])(w,c,l,!1,null,"b19e5746",null)),q=L.exports,y=s("fa7d");function P(t){return t.startsWith("/")?`${y["b"]}${t}?uuid=${Object(n["a"])()}`:`${y["b"]}/${t}?uuid=${Object(n["a"])()}`}var S={name:"ApiList",components:{Card:q},props:{docs:{type:Object,default:{controllers:[],paths:{},rateLimit:{}}}},data(){return{methodStyle:{GET:"background-color: rgba(97,175,254,.1);",POST:"background-color: rgba(73,204,144,.1);",HEAD:"background-color: rgba(144,18,254,.1);",PUT:"background-color: rgba(252,161,48,.1);",DELETE:"background-color: rgb(249,62,62,.1)",OPTIONS:"background-color: rgb(13,90,167,.1);",PATCH:"background-color: rgba(80,227,194,.1);"}}},methods:{changeActiveKey(t){},handleChange(t){this.getPath(t).requireLogin,this.getPath(t).requireLogin;let e=this.getPath(t).requireLogin,s={target:"login",method:t.method,api:t.path,value:e};this.$http.post(P("/operate"),s).then(s=>{100===s.data.code?this.$message.success(`接口 : < ${t.method} ${t.path} > 登录权限已修改 : ${e?"< Login Required >":"< No Login Required >"}`):(this.getPath(t).requireLogin=!e,this.$message.success("接口登录权限修改失败"))})},hasRateLimit(t){return this.docs.rateLimit[t.path]&&this.docs.rateLimit[t.path][t.method]},rateLimit(t){return this.hasRateLimit(t)?this.docs.rateLimit[t.path][t.method]:null},hasAuth(t){return this.getPath(t).isAuth},hasRequireLogin(t){return this.getPath(t).requireLogin},getPath(t){return this.docs.paths[t.path][t.method]},methodColorClass(t){return"api-method-"+t.toLowerCase()},save(t){let e=this.docs.paths[t.path][t.method].auth,s={operate:"update",target:"api",method:t.method,api:t.path,role:{require:e.requireRoles,exclude:e.excludeRoles},permission:{require:e.requirePermissions,exclude:e.excludePermissions}};console.log(this.docs.paths[t.path][t.method]),this.$http.post(P("/operate"),s).then(e=>{if(console.log(e.data),100===e.data.code){let s=e.data.data;s.auth?(s.auth.requireRoles||(s.auth.requireRoles=[]),s.auth.requirePermissions||(s.auth.requirePermissions=[]),s.auth.excludeRoles||(s.auth.excludeRoles=[]),s.auth.excludePermissions||(s.auth.excludePermissions=[])):s.auth={requireRoles:[],requirePermissions:[],excludeRoles:[],excludePermissions:[]},this.$set(this.docs.paths[t.path],t.method,s),this.$message.success("保存成功，已自动去重")}console.log(this.docs.paths[t.path][t.method])})},parsePath(t){let e="";do{let s=t.search(/{.*?}/g);if(-1===s)break;let a=t.indexOf("}",s);e+=`${t.substring(0,s)}<span style="color: var(--main-color)">${t.substring(s,a+1)}</span>`,t=t.substring(a+1)}while(1);return e||t}}},R=S,O=(s("9ced"),Object(g["a"])(R,r,o,!1,null,"1d96be2c",null)),A=O.exports,j=function(){var t=this,e=t._self._c;return e("a",{ref:"a",staticClass:"server-card-a",class:{"not-allowed":!t.server.dashboard},attrs:{href:t.url,target:"_blank"},on:{click:function(e){return e.preventDefault(),t.click.apply(null,arguments)}}},[e("div",{staticClass:"server-card",class:{"not-allowed":!t.server.dashboard,allowed:t.server.dashboard}},[t.server.dashboard&&!t.eq?e("svg",{staticClass:"icon",staticStyle:{"margin-left":"10px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-server"}})]):t._e(),t.server.dashboard?t._e():e("svg",{staticClass:"icon",staticStyle:{"margin-left":"10px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-ban"}})]),t.server.dashboard&&t.eq?e("svg",{staticClass:"icon",staticStyle:{"margin-left":"10px"},attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-targeting"}})]):t._e(),e("div",{staticClass:"server-info"},[e("div",[t._v("host: "+t._s(t.server.host))]),e("div",[t._v("port: "+t._s(t.server.port))])])])])},I=[],V=s("7736"),T={name:"ServerCard",props:{server:{type:Object,default:{dashboard:null}}},computed:{...Object(V["c"])(["currentServer"]),url(){return this.server.dashboard?`${Object(y["a"])(this.server.dashboard)}#/?uuid=${Object(n["a"])()}`:""},eq(){return this.server.appName===this.currentServer.appName&&this.server.application===this.currentServer.application&&this.server.port===this.currentServer.port&&this.server.host===this.currentServer.host}},data(){return{}},mounted(){},methods:{click(){this.server.dashboard?window.open(this.url,"_blank"):this.$message.warning("Dashboard is not allowed")}}},N=T,D=(s("bdd4"),Object(g["a"])(N,j,I,!1,null,"611e8af4",null)),H=D.exports,U={name:"Index",components:{ServerCard:H,ApiList:A},data(){return{docs:{controllers:[],paths:{},rateLimit:{},appVersionInfo:{},info:{license:{}},conns:[]},load:!1}},methods:{...Object(V["b"])(["setServer"]),getUrl(t,e){let s=window.location.href.indexOf(":"),a=window.location.href.substring(0,s);return e?`${a}://${t}:${e}`:`${a}://${t}`}},computed:{token(){return Object(n["a"])()},servers(){let t=0,e=[],s=[];for(let a=0,i=0;a<this.docs.conns.length;a++)0!==a&&i%5===0&&(e[t++]=s,i%=5,s=[]),s[i++]=this.docs.conns[a];return e[t]=s,e}},mounted(){this.$http.get(P("/docs")).then(t=>{this.docs=t.data,this.setServer(this.docs.appVersionInfo),this.load=!0})}},E=U,z=(s("24e9"),Object(g["a"])(E,a,i,!1,null,"75347590",null));e["default"]=z.exports},f6b8:function(t,e,s){}}]);